{"ast":null,"code":"import _regeneratorRuntime from \"/Users/estebanleandro/Documents/Projects/personal/Comparer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/estebanleandro/Documents/Projects/personal/Comparer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/estebanleandro/Documents/Projects/personal/Comparer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/estebanleandro/Documents/Projects/personal/Comparer/src/App.js\";\nimport React from \"react\";\nimport { useState } from \"react\";\nimport axios from \"axios\";\nimport \"./styles.css\";\nimport getMetrics from \"./metrics\";\nimport budgets from \"./budgets\";\n\nfunction filterMetrics(object, metrics) {\n  var list = [];\n  metrics.forEach(function (metric) {\n    if (object[metric]) {\n      list.push({\n        key: metric,\n        value: object[metric]\n      });\n    }\n  });\n  return list;\n}\n\nfunction Form() {\n  var _this = this;\n\n  var metrics = getMetrics();\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      testUrl = _useState2[0],\n      setTestUrl = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      data = _useState4[0],\n      setData = _useState4[1];\n\n  var _useState5 = useState(\"Desktop\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      platform = _useState6[0],\n      setPlatform = _useState6[1];\n\n  var _useState7 = useState(\"New Page\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      page = _useState8[0],\n      setPage = _useState8[1];\n\n  function getData(_x) {\n    return _getData.apply(this, arguments);\n  }\n\n  function _getData() {\n    _getData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(testUrl) {\n      var url, segments, id, dataUrl, result, filtered;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              url = testUrl.replace('https://', '');\n              segments = url.split(\"/\");\n              id = segments[2];\n              dataUrl = \"https://webpagetest.org/jsonResult.php?test=\" + id + \"&pretty=1\";\n              _context.next = 6;\n              return axios(dataUrl);\n\n            case 6:\n              result = _context.sent;\n              filtered = filterMetrics(result.data.data.median.firstView, metrics);\n              console.log(\"filtered!: \", filtered);\n              setData(filtered);\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _getData.apply(this, arguments);\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 5\n    }\n  }, \"Webpagetest Test Link\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-field col s12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    onChange: function onChange(event) {\n      setTestUrl(event.target.value);\n    },\n    id: \"email\",\n    type: \"text\",\n    className: \"validate\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 6\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 6\n    }\n  }, \"Webpagetest URL\"))), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: function onClick() {\n      return getData(testUrl);\n    },\n    className: \"btn waves-effect waves-light\",\n    type: \"submit\",\n    name: \"action\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 4\n    }\n  }, \"Submit\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 4\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 4\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 4\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 6\n    }\n  }, \"Filters\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col s6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }\n  }, \"Platform\"), /*#__PURE__*/React.createElement(\"select\", {\n    className: \"browser-default\",\n    onChange: function onChange(event) {\n      return setPlatform(event.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"Desktop\",\n    selected: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 8\n    }\n  }, \"Desktop\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"Mobile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 8\n    }\n  }, \"Mobile\")), \"Platform= \", platform), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col s6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }\n  }, \"Page\"), /*#__PURE__*/React.createElement(\"select\", {\n    className: \"browser-default\",\n    onChange: function onChange(event) {\n      return setPage(event.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"New Page\",\n    selected: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 8\n    }\n  }, \"New Page\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"Community Results\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 8\n    }\n  }, \"Community Results\")), \"Page= \", page)), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 4\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 4\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 4\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 5\n    }\n  }, \"Results\"), /*#__PURE__*/React.createElement(\"table\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 8\n    }\n  }, \"Metric\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 8\n    }\n  }, \"Budget\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 8\n    }\n  }, \"Value\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 6\n    }\n  }, data.map(function (metric) {\n    var budget = budgets[platform][page][metric.key];\n    var isOnBudget = budget ? metric.value < budget : undefined;\n    var color = isOnBudget ? \"budget--green\" : budget ? \"budget--red\" : \"\";\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 11\n      }\n    }, metric.key), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 11\n      }\n    }, budget ? budget : \"\"), /*#__PURE__*/React.createElement(\"td\", {\n      className: color,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 11\n      }\n    }, metric.value));\n  })))));\n}\n\nexport default function App() {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 4\n    }\n  }));\n}\n\nObject.flatten = function (data) {\n  var result = {};\n\n  function recurse(cur, prop) {\n    if (Object(cur) !== cur) {\n      result[prop] = cur;\n    } else if (Array.isArray(cur)) {\n      for (var i = 0, l = cur.length; i < l; i++) {\n        recurse(cur[i], prop + \"[\" + i + \"]\");\n      }\n\n      if (l == 0) result[prop] = [];\n    } else {\n      var isEmpty = true;\n\n      for (var p in cur) {\n        isEmpty = false;\n        recurse(cur[p], prop ? prop + \".\" + p : p);\n      }\n\n      if (isEmpty && prop) result[prop] = {};\n    }\n  }\n\n  recurse(data, \"\");\n  return result;\n};","map":{"version":3,"sources":["/Users/estebanleandro/Documents/Projects/personal/Comparer/src/App.js"],"names":["React","useState","axios","getMetrics","budgets","filterMetrics","object","metrics","list","forEach","metric","push","key","value","Form","testUrl","setTestUrl","data","setData","platform","setPlatform","page","setPage","getData","url","replace","segments","split","id","dataUrl","result","filtered","median","firstView","console","log","event","target","map","budget","isOnBudget","undefined","color","App","Object","flatten","recurse","cur","prop","Array","isArray","i","l","length","isEmpty","p"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { useState } from \"react\";\nimport axios from \"axios\";\nimport \"./styles.css\";\nimport getMetrics from \"./metrics\";\nimport budgets from \"./budgets\";\n\nfunction filterMetrics(object, metrics){\n\tvar list = [];\n\t\n\tmetrics.forEach(metric => {\n\t\tif(object[metric]){\n\t\t\tlist.push({\n\t\t\t\tkey: metric,\n\t\t\t\tvalue: object[metric]\n\t\t\t})\n\t\t}\n\t});\n\n\treturn list;\n}\n\nfunction Form() {\n\tconst metrics = getMetrics();\n\tconst [testUrl, setTestUrl] = useState(\"\");\n\tconst [data, setData] = useState([]);\n\tconst [platform, setPlatform] = useState(\"Desktop\");\n\tconst [page, setPage] = useState(\"New Page\");\n\n\tasync function getData(testUrl){\n\t\tlet url = testUrl.replace('https://', '');\n\t\tlet segments = url.split(\"/\");\n\t\tconst id = segments[2];\n\t\tconst dataUrl = \"https://webpagetest.org/jsonResult.php?test=\" + id + \"&pretty=1\";\n\t\tconst result = await axios(dataUrl);\n\t\t\n\t\tvar filtered = filterMetrics(result.data.data.median.firstView, metrics)\n\t\tconsole.log(\"filtered!: \", filtered);\n\t\tsetData(filtered);\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t<div className=\"row\">\n\t\t\t\t<h5>Webpagetest Test Link</h5>\n\t\t\t\t<div className=\"input-field col s12\">\n\t\t\t\t\t<input onChange={(event)=> {setTestUrl(event.target.value)}} id=\"email\" type=\"text\" className=\"validate\" />\n\t\t\t\t\t<label htmlFor=\"email\">Webpagetest URL</label>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<button onClick={ ()  => getData(testUrl) } className=\"btn waves-effect waves-light\" type=\"submit\" name=\"action\">\n\t\t\t\tSubmit\n\t\t\t</button>\n\n\t\t\t<br></br>\n\t\t\t<br></br>\n\t\t\t<br></br>\n\n\t\t\t<div className=\"row\">\n\t\t\t\t\t<h5>Filters</h5>\n\t\t\t\t\t<div className=\"col s6\">\n\t\t\t\t\t\t<label>Platform</label>\n\t\t\t\t\t\t<select className=\"browser-default\" onChange={ (event)=>setPlatform(event.target.value)}>\n\t\t\t\t\t\t\t<option value=\"Desktop\" selected>Desktop</option>\n\t\t\t\t\t\t\t<option value=\"Mobile\">Mobile</option>\n\t\t\t\t\t\t</select>\n\t\t\t\t\t\tPlatform= {platform}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"col s6\">\n\t\t\t\t\t\t<label>Page</label>\n\t\t\t\t\t\t<select className=\"browser-default\" onChange={ (event)=>setPage(event.target.value)}>\n\t\t\t\t\t\t\t<option value=\"New Page\" selected>New Page</option>\n\t\t\t\t\t\t\t<option value=\"Community Results\">Community Results</option>\n\t\t\t\t\t\t</select>\n\n\t\t\t\t\t\tPage= {page}\n\t\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<br></br>\n\t\t\t<br></br>\n\t\t\t<br></br>\n\n\t\t\t<div className=\"row\">\n\n\t\t\t\t<h5>Results</h5>\n\t\t\t\t<table>\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>Metric</th>\n\t\t\t\t\t\t\t<th>Budget</th>\n\t\t\t\t\t\t\t<th>Value</th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\n\t\t\t\t\t<tbody>\n\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdata.map( metric => {\n\t\t\t\t\t\t\t\tlet budget = budgets[platform][page][metric.key];\n\t\t\t\t\t\t\t\tlet isOnBudget = budget ? metric.value < budget : undefined;\n\t\t\t\t\t\t\t\tlet color = isOnBudget ? \"budget--green\" : (budget ? \"budget--red\" : \"\");\n\t\t\t\t\t\t\t\treturn(\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td>{metric.key}</td>\n\t\t\t\t\t\t\t\t\t\t<td>{budget ? budget : \"\"}</td>\n\t\t\t\t\t\t\t\t\t\t<td className={color}>{metric.value}</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t</div>\n\n\t\t</div>\n\t);\n}\n\nexport default function App() {\n\treturn (\n\t\t<div className=\"App\">\n\t\t\t<Form />\n\t\t</div>\n\t);\n}\n\nObject.flatten = function(data) {\n    var result = {};\n    function recurse (cur, prop) {\n        if (Object(cur) !== cur) {\n            result[prop] = cur;\n        } else if (Array.isArray(cur)) {\n\t\t\tfor(var i=0, l=cur.length; i<l; i++)\n\t\t\t\trecurse(cur[i], prop + \"[\" + i + \"]\");\n            if (l == 0)\n                result[prop] = [];\n        } else {\n            var isEmpty = true;\n            for (var p in cur) {\n                isEmpty = false;\n                recurse(cur[p], prop ? prop+\".\"+p : p);\n            }\n            if (isEmpty && prop)\n                result[prop] = {};\n        }\n    }\n    recurse(data, \"\");\n    return result;\n}"]},"metadata":{},"sourceType":"module"}